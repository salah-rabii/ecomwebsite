{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\salah\\\\Downloads\\\\Ecomwebsite\\\\frontend\\\\src\\\\common\\\\header\\\\Search.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport logo from \"../../components/assets/images/logo.png\";\nimport { Link } from \"react-router-dom\";\nimport AuthService from \"../../components/Autentification/authservice\";\nimport Logout from \"../../components/Autentification/logout\";\nconst Search = ({\n  CartItem\n}) => {\n  // État local pour suivre le statut d'authentification\n  const [isAuthenticated, setIsAuthenticated] = useState(AuthService.checkAuthStatus());\n  const [isAdminUser, setIsAdminUser] = useState(AuthService.isAdmin());\n\n  // Fonction pour vérifier et mettre à jour le statut d'authentification\n  const checkAuthStatus = () => {\n    const authStatus = AuthService.checkAuthStatus();\n    const adminStatus = AuthService.isAdmin();\n    setIsAuthenticated(authStatus);\n    setIsAdminUser(adminStatus);\n  };\n\n  // Effet qui s'exécute à chaque montage du composant et qui ajoute un écouteur d'événement\n  useEffect(() => {\n    // Vérifier au chargement\n    checkAuthStatus();\n\n    // Créer un événement personnalisé pour la mise à jour de l'authentification\n    window.addEventListener('authStateChanged', checkAuthStatus);\n\n    // Vérifier toutes les secondes (solution de secours)\n    const interval = setInterval(checkAuthStatus, 1000);\n\n    // fixed Header (code existant)\n    const scrollHandler = function () {\n      const search = document.querySelector(\".search\");\n      search.classList.toggle(\"active\", window.scrollY > 100);\n    };\n    window.addEventListener(\"scroll\", scrollHandler);\n\n    // Nettoyage lors du démontage\n    return () => {\n      window.removeEventListener('authStateChanged', checkAuthStatus);\n      window.removeEventListener(\"scroll\", scrollHandler);\n      clearInterval(interval);\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"section\", {\n    className: \"search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container c_flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"logo width\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logo,\n    alt: \"\",\n    className: \"mr-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-box f_flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Search and hit enter...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, \"All Category\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"icon f_flex width\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/wishlist\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa-regular fa-heart icon-circle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user-icon-container\",\n    style: {\n      position: 'relative'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: isAuthenticated ? '/product' : '/register',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-user icon-circle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      position: 'absolute',\n      top: '-5px',\n      right: '-5px',\n      width: '10px',\n      height: '10px',\n      borderRadius: '50%',\n      backgroundColor: isAuthenticated ? '#28a745' : '#dc3545'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  })), isAuthenticated && !isAdminUser && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: 'absolute',\n      bottom: '-30px',\n      left: '50%',\n      transform: 'translateX(-50%)',\n      zIndex: 1000\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Logout, {\n    onLogoutSuccess: checkAuthStatus,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-shopping-bag icon-circle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, CartItem.length === 0 ? \"0\" : CartItem.length)))))));\n};\nexport default Search;","map":{"version":3,"names":["React","useState","useEffect","logo","Link","AuthService","Logout","Search","CartItem","isAuthenticated","setIsAuthenticated","checkAuthStatus","isAdminUser","setIsAdminUser","isAdmin","authStatus","adminStatus","window","addEventListener","interval","setInterval","scrollHandler","search","document","querySelector","classList","toggle","scrollY","removeEventListener","clearInterval","createElement","Fragment","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","href","src","alt","type","placeholder","to","style","position","top","right","width","height","borderRadius","backgroundColor","bottom","left","transform","zIndex","onLogoutSuccess","length"],"sources":["C:/Users/salah/Downloads/Ecomwebsite/frontend/src/common/header/Search.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\"\r\nimport logo from \"../../components/assets/images/logo.png\"\r\nimport { Link } from \"react-router-dom\"\r\nimport AuthService from \"../../components/Autentification/authservice\"\r\nimport Logout from \"../../components/Autentification/logout\"\r\n\r\nconst Search = ({ CartItem }) => {\r\n  // État local pour suivre le statut d'authentification\r\n  const [isAuthenticated, setIsAuthenticated] = useState(AuthService.checkAuthStatus());\r\n  const [isAdminUser, setIsAdminUser] = useState(AuthService.isAdmin());\r\n\r\n  // Fonction pour vérifier et mettre à jour le statut d'authentification\r\n  const checkAuthStatus = () => {\r\n    const authStatus = AuthService.checkAuthStatus();\r\n    const adminStatus = AuthService.isAdmin();\r\n    setIsAuthenticated(authStatus);\r\n    setIsAdminUser(adminStatus);\r\n  };\r\n\r\n  // Effet qui s'exécute à chaque montage du composant et qui ajoute un écouteur d'événement\r\n  useEffect(() => {\r\n    // Vérifier au chargement\r\n    checkAuthStatus();\r\n    \r\n    // Créer un événement personnalisé pour la mise à jour de l'authentification\r\n    window.addEventListener('authStateChanged', checkAuthStatus);\r\n    \r\n    // Vérifier toutes les secondes (solution de secours)\r\n    const interval = setInterval(checkAuthStatus, 1000);\r\n    \r\n    // fixed Header (code existant)\r\n    const scrollHandler = function() {\r\n      const search = document.querySelector(\".search\")\r\n      search.classList.toggle(\"active\", window.scrollY > 100)\r\n    };\r\n    window.addEventListener(\"scroll\", scrollHandler);\r\n\r\n    // Nettoyage lors du démontage\r\n    return () => {\r\n      window.removeEventListener('authStateChanged', checkAuthStatus);\r\n      window.removeEventListener(\"scroll\", scrollHandler);\r\n      clearInterval(interval);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <section className='search'>\r\n        <div className='container c_flex'>\r\n          <div className='logo width'>\r\n            <a href=\"/\">\r\n            <img src={logo} alt='' className=\"mr-3\" />\r\n            </a>\r\n          </div>\r\n\r\n          <div className='search-box f_flex'>\r\n            <i className='fa fa-search'></i>\r\n            <input type='text' placeholder='Search and hit enter...' />\r\n            <span>All Category</span>\r\n          </div>\r\n\r\n          <div className='icon f_flex width'>\r\n            <Link to='/wishlist'>\r\n              <i className='fa-regular fa-heart icon-circle'></i>\r\n            </Link>\r\n            \r\n            <div className=\"user-icon-container\" style={{ position: 'relative' }}>\r\n              <Link to={isAuthenticated ? '/product' : '/register'}>\r\n                <i className='fa fa-user icon-circle'></i>\r\n                <span \r\n                  style={{ \r\n                    position: 'absolute', \r\n                    top: '-5px', \r\n                    right: '-5px', \r\n                    width: '10px', \r\n                    height: '10px', \r\n                    borderRadius: '50%', \r\n                    backgroundColor: isAuthenticated ? '#28a745' : '#dc3545', \r\n                  }} \r\n                />\r\n              </Link>\r\n              \r\n              {isAuthenticated && !isAdminUser && (\r\n                <div style={{ \r\n                  position: 'absolute', \r\n                  bottom: '-30px', \r\n                  left: '50%', \r\n                  transform: 'translateX(-50%)',\r\n                  zIndex: 1000\r\n                }}>\r\n                  <Logout onLogoutSuccess={checkAuthStatus} />\r\n                </div>\r\n              )}\r\n            </div>\r\n            \r\n            <div className='cart'>\r\n              <Link to='/cart'>\r\n                <i className='fa fa-shopping-bag icon-circle'></i>\r\n                <span>{CartItem.length === 0 ? \"0\" : CartItem.length}</span>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Search"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,IAAI,MAAM,yCAAyC;AAC1D,SAASC,IAAI,QAAQ,kBAAkB;AACvC,OAAOC,WAAW,MAAM,8CAA8C;AACtE,OAAOC,MAAM,MAAM,yCAAyC;AAE5D,MAAMC,MAAM,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAC/B;EACA,MAAM,CAACC,eAAe,EAAEC,kBAAkB,CAAC,GAAGT,QAAQ,CAACI,WAAW,CAACM,eAAe,CAAC,CAAC,CAAC;EACrF,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGZ,QAAQ,CAACI,WAAW,CAACS,OAAO,CAAC,CAAC,CAAC;;EAErE;EACA,MAAMH,eAAe,GAAGA,CAAA,KAAM;IAC5B,MAAMI,UAAU,GAAGV,WAAW,CAACM,eAAe,CAAC,CAAC;IAChD,MAAMK,WAAW,GAAGX,WAAW,CAACS,OAAO,CAAC,CAAC;IACzCJ,kBAAkB,CAACK,UAAU,CAAC;IAC9BF,cAAc,CAACG,WAAW,CAAC;EAC7B,CAAC;;EAED;EACAd,SAAS,CAAC,MAAM;IACd;IACAS,eAAe,CAAC,CAAC;;IAEjB;IACAM,MAAM,CAACC,gBAAgB,CAAC,kBAAkB,EAAEP,eAAe,CAAC;;IAE5D;IACA,MAAMQ,QAAQ,GAAGC,WAAW,CAACT,eAAe,EAAE,IAAI,CAAC;;IAEnD;IACA,MAAMU,aAAa,GAAG,SAAAA,CAAA,EAAW;MAC/B,MAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,SAAS,CAAC;MAChDF,MAAM,CAACG,SAAS,CAACC,MAAM,CAAC,QAAQ,EAAET,MAAM,CAACU,OAAO,GAAG,GAAG,CAAC;IACzD,CAAC;IACDV,MAAM,CAACC,gBAAgB,CAAC,QAAQ,EAAEG,aAAa,CAAC;;IAEhD;IACA,OAAO,MAAM;MACXJ,MAAM,CAACW,mBAAmB,CAAC,kBAAkB,EAAEjB,eAAe,CAAC;MAC/DM,MAAM,CAACW,mBAAmB,CAAC,QAAQ,EAAEP,aAAa,CAAC;MACnDQ,aAAa,CAACV,QAAQ,CAAC;IACzB,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,oBACEnB,KAAA,CAAA8B,aAAA,CAAA9B,KAAA,CAAA+B,QAAA,qBACE/B,KAAA,CAAA8B,aAAA;IAASE,SAAS,EAAC,QAAQ;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACzBtC,KAAA,CAAA8B,aAAA;IAAKE,SAAS,EAAC,kBAAkB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC/BtC,KAAA,CAAA8B,aAAA;IAAKE,SAAS,EAAC,YAAY;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACzBtC,KAAA,CAAA8B,aAAA;IAAGS,IAAI,EAAC,GAAG;IAAAN,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACXtC,KAAA,CAAA8B,aAAA;IAAKU,GAAG,EAAErC,IAAK;IAACsC,GAAG,EAAC,EAAE;IAACT,SAAS,EAAC,MAAM;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CACtC,CACA,CAAC,eAENtC,KAAA,CAAA8B,aAAA;IAAKE,SAAS,EAAC,mBAAmB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAChCtC,KAAA,CAAA8B,aAAA;IAAGE,SAAS,EAAC,cAAc;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAI,CAAC,eAChCtC,KAAA,CAAA8B,aAAA;IAAOY,IAAI,EAAC,MAAM;IAACC,WAAW,EAAC,yBAAyB;IAAAV,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC,eAC3DtC,KAAA,CAAA8B,aAAA;IAAAG,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAM,cAAkB,CACrB,CAAC,eAENtC,KAAA,CAAA8B,aAAA;IAAKE,SAAS,EAAC,mBAAmB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAChCtC,KAAA,CAAA8B,aAAA,CAAC1B,IAAI;IAACwC,EAAE,EAAC,WAAW;IAAAX,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAClBtC,KAAA,CAAA8B,aAAA;IAAGE,SAAS,EAAC,iCAAiC;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAI,CAC9C,CAAC,eAEPtC,KAAA,CAAA8B,aAAA;IAAKE,SAAS,EAAC,qBAAqB;IAACa,KAAK,EAAE;MAAEC,QAAQ,EAAE;IAAW,CAAE;IAAAb,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACnEtC,KAAA,CAAA8B,aAAA,CAAC1B,IAAI;IAACwC,EAAE,EAAEnC,eAAe,GAAG,UAAU,GAAG,WAAY;IAAAwB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACnDtC,KAAA,CAAA8B,aAAA;IAAGE,SAAS,EAAC,wBAAwB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAI,CAAC,eAC1CtC,KAAA,CAAA8B,aAAA;IACEe,KAAK,EAAE;MACLC,QAAQ,EAAE,UAAU;MACpBC,GAAG,EAAE,MAAM;MACXC,KAAK,EAAE,MAAM;MACbC,KAAK,EAAE,MAAM;MACbC,MAAM,EAAE,MAAM;MACdC,YAAY,EAAE,KAAK;MACnBC,eAAe,EAAE3C,eAAe,GAAG,SAAS,GAAG;IACjD,CAAE;IAAAwB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACH,CACG,CAAC,EAEN7B,eAAe,IAAI,CAACG,WAAW,iBAC9BZ,KAAA,CAAA8B,aAAA;IAAKe,KAAK,EAAE;MACVC,QAAQ,EAAE,UAAU;MACpBO,MAAM,EAAE,OAAO;MACfC,IAAI,EAAE,KAAK;MACXC,SAAS,EAAE,kBAAkB;MAC7BC,MAAM,EAAE;IACV,CAAE;IAAAvB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACAtC,KAAA,CAAA8B,aAAA,CAACxB,MAAM;IAACmD,eAAe,EAAE9C,eAAgB;IAAAsB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CACxC,CAEJ,CAAC,eAENtC,KAAA,CAAA8B,aAAA;IAAKE,SAAS,EAAC,MAAM;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACnBtC,KAAA,CAAA8B,aAAA,CAAC1B,IAAI;IAACwC,EAAE,EAAC,OAAO;IAAAX,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACdtC,KAAA,CAAA8B,aAAA;IAAGE,SAAS,EAAC,gCAAgC;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAI,CAAC,eAClDtC,KAAA,CAAA8B,aAAA;IAAAG,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAO9B,QAAQ,CAACkD,MAAM,KAAK,CAAC,GAAG,GAAG,GAAGlD,QAAQ,CAACkD,MAAa,CACvD,CACH,CACF,CACF,CACE,CACT,CAAC;AAEP,CAAC;AAED,eAAenD,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module"}