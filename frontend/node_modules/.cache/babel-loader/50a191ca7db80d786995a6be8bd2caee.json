{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\salah\\\\Downloads\\\\project - Copie\\\\src\\\\common\\\\payement\\\\checkout.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { loadStripe } from '@stripe/stripe-js';\nimport AuthService from './authservice';\nimport \"./style.css\";\n\n// Charger la clé publique Stripe\nconst stripePromise = loadStripe('pk_test_51R5sK4FaTQqzl2W9tQuV2BidxI5yLZYCYVNmz6zAMunSMdWkQa5S9GhV5bCn3buKHs6U6h3SKZ2u76UUyN8cLnpI004sYlyHrF');\nconst Checkout = ({\n  CartItem\n}) => {\n  const history = useHistory();\n  const location = useLocation();\n  // Si CartItem est passé en props, utilisez-le, sinon essayez de le récupérer depuis location.state\n  const cartItems = CartItem || location.state && location.state.cartItems || [];\n\n  // États pour gérer le statut d'authentification\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n\n  // Calcul du prix total\n  const totalPrice = cartItems.reduce((price, item) => price + item.qty * item.price, 0);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Vérifier l'état d'authentification au chargement\n  useEffect(() => {\n    const checkAuth = () => {\n      const authStatus = AuthService.checkAuthStatus();\n      setIsAuthenticated(authStatus);\n    };\n\n    // Vérifier au chargement\n    checkAuth();\n\n    // Écouter les changements d'authentification\n    const handleAuthChange = () => {\n      checkAuth();\n    };\n    window.addEventListener('authStateChanged', handleAuthChange);\n\n    // Nettoyage\n    return () => {\n      window.removeEventListener('authStateChanged', handleAuthChange);\n    };\n  }, []);\n\n  // Fonction pour rediriger vers la page de connexion\n  const redirectToLogin = () => {\n    // Sauvegarder l'intention de checkout pour revenir après connexion\n    sessionStorage.setItem('redirectAfterLogin', '/checkout');\n    history.push('/signin');\n  };\n\n  // Fonction pour gérer le checkout\n  const handleCheckout = async () => {\n    if (cartItems.length === 0) {\n      setError(\"Votre panier est vide\");\n      return;\n    }\n\n    // Vérifier l'authentification avant de procéder\n    if (!isAuthenticated) {\n      setError(\"Veuillez vous connecter ou créer un compte pour finaliser votre achat\");\n      return;\n    }\n    setIsLoading(true);\n    setError(null);\n    try {\n      // Préparer les données pour la requête Stripe\n      const productRequest = {\n        name: \"Achat d'articles\",\n        currency: \"USD\",\n        amount: totalPrice * 100,\n        // Stripe attend le montant en centimes\n        quantity: 1\n      };\n      console.log(\"Envoi de la demande de paiement:\", productRequest);\n\n      // Appel à l'API de checkout avec options CORS explicites\n      const response = await axios.post(\"http://localhost:8080/api/product/v1/checkout\", productRequest, {\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        withCredentials: true // Important: envoyer les cookies pour l'authentification\n      });\n      console.log(\"Réponse reçue:\", response.data);\n      if (response.data && response.data.sessionId) {\n        // Utiliser l'API Stripe pour rediriger l'utilisateur vers la page de paiement\n        const stripe = await stripePromise;\n        const {\n          error\n        } = await stripe.redirectToCheckout({\n          sessionId: response.data.sessionId\n        });\n        if (error) {\n          console.error(\"Erreur Stripe:\", error);\n          setError(`Erreur de redirection Stripe: ${error.message}`);\n        }\n      } else if (response.data && response.data.sessionUrl) {\n        // Redirection directe si sessionUrl est fourni\n        window.location.href = response.data.sessionUrl;\n      } else {\n        console.error(\"Format de réponse invalide:\", response.data);\n        setError(\"Format de réponse invalide du serveur\");\n      }\n    } catch (err) {\n      console.error(\"Erreur lors du paiement:\", err);\n\n      // Vérifier si l'erreur est liée à l'authentification\n      if (err.response && err.response.status === 401) {\n        setError(\"Votre session a expiré. Veuillez vous reconnecter.\");\n        setTimeout(redirectToLogin, 2000); // Rediriger après 2 secondes\n      } else {\n        // Afficher plus de détails sur l'erreur\n        const errorMessage = err.response ? `Erreur ${err.response.status}: ${JSON.stringify(err.response.data)}` : `Erreur: ${err.message}`;\n        setError(`Une erreur est survenue lors du traitement de votre paiement: ${errorMessage}`);\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }\n  }, \"R\\xE9capitulatif de la commande\"), !isAuthenticated && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"auth-required-message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }\n  }, \"Vous devez \\xEAtre connect\\xE9 pour finaliser votre achat.\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"auth-buttons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"login-button\",\n    onClick: redirectToLogin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  }, \"Se connecter\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"register-button\",\n    onClick: () => history.push('/register'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }, \"Cr\\xE9er un compte\"))), cartItems.length === 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"empty-cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"empty-cart-message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 11\n    }\n  }, \"Votre panier est vide\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"return-button\",\n    onClick: () => history.push('/produit'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 11\n    }\n  }, \"Retourner \\xE0 la boutique\")) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-items\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 11\n    }\n  }, cartItems.map(item => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-item\",\n    key: item.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"item-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: item.cover,\n    alt: item.name,\n    className: \"item-thumbnail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"item-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 21\n    }\n  }, item.name), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"item-price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 21\n    }\n  }, \"$\", item.price, \".00 x \", item.qty, \" = $\", item.price * item.qty, \".00\")))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-summary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-total\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 15\n    }\n  }, \"Total:\"), /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"total-price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 15\n    }\n  }, \"$\", totalPrice, \".00\")), error && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error-message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 23\n    }\n  }, error), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-actions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"back-to-cart\",\n    onClick: () => history.push('/cart'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 15\n    }\n  }, \"Retour au panier\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"pay-button\",\n    onClick: handleCheckout,\n    disabled: isLoading || !isAuthenticated,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 15\n    }\n  }, isLoading ? \"Traitement en cours...\" : \"Procéder au paiement\")))));\n};\nexport default Checkout;","map":{"version":3,"names":["React","useState","useEffect","useHistory","useLocation","axios","loadStripe","AuthService","stripePromise","Checkout","CartItem","history","location","cartItems","state","isAuthenticated","setIsAuthenticated","totalPrice","reduce","price","item","qty","isLoading","setIsLoading","error","setError","checkAuth","authStatus","checkAuthStatus","handleAuthChange","window","addEventListener","removeEventListener","redirectToLogin","sessionStorage","setItem","push","handleCheckout","length","productRequest","name","currency","amount","quantity","console","log","response","post","headers","withCredentials","data","sessionId","stripe","redirectToCheckout","message","sessionUrl","href","err","status","setTimeout","errorMessage","JSON","stringify","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClick","Fragment","map","key","id","src","cover","alt","disabled"],"sources":["C:/Users/salah/Downloads/project - Copie/src/common/payement/checkout.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { loadStripe } from '@stripe/stripe-js';\r\nimport AuthService from './authservice';\r\nimport \"./style.css\";\r\n\r\n// Charger la clé publique Stripe\r\nconst stripePromise = loadStripe('pk_test_51R5sK4FaTQqzl2W9tQuV2BidxI5yLZYCYVNmz6zAMunSMdWkQa5S9GhV5bCn3buKHs6U6h3SKZ2u76UUyN8cLnpI004sYlyHrF');\r\n\r\nconst Checkout = ({ CartItem }) => {\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  // Si CartItem est passé en props, utilisez-le, sinon essayez de le récupérer depuis location.state\r\n  const cartItems = CartItem || (location.state && location.state.cartItems) || [];\r\n  \r\n  // États pour gérer le statut d'authentification\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  \r\n  // Calcul du prix total\r\n  const totalPrice = cartItems.reduce(\r\n    (price, item) => price + item.qty * item.price,\r\n    0\r\n  );\r\n  \r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  \r\n  // Vérifier l'état d'authentification au chargement\r\n  useEffect(() => {\r\n    const checkAuth = () => {\r\n      const authStatus = AuthService.checkAuthStatus();\r\n      setIsAuthenticated(authStatus);\r\n    };\r\n    \r\n    // Vérifier au chargement\r\n    checkAuth();\r\n    \r\n    // Écouter les changements d'authentification\r\n    const handleAuthChange = () => {\r\n      checkAuth();\r\n    };\r\n    \r\n    window.addEventListener('authStateChanged', handleAuthChange);\r\n    \r\n    // Nettoyage\r\n    return () => {\r\n      window.removeEventListener('authStateChanged', handleAuthChange);\r\n    };\r\n  }, []);\r\n\r\n  // Fonction pour rediriger vers la page de connexion\r\n  const redirectToLogin = () => {\r\n    // Sauvegarder l'intention de checkout pour revenir après connexion\r\n    sessionStorage.setItem('redirectAfterLogin', '/checkout');\r\n    history.push('/signin');\r\n  };\r\n\r\n  // Fonction pour gérer le checkout\r\n  const handleCheckout = async () => {\r\n    if (cartItems.length === 0) {\r\n      setError(\"Votre panier est vide\");\r\n      return;\r\n    }\r\n    \r\n    // Vérifier l'authentification avant de procéder\r\n    if (!isAuthenticated) {\r\n      setError(\"Veuillez vous connecter ou créer un compte pour finaliser votre achat\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      // Préparer les données pour la requête Stripe\r\n      const productRequest = {\r\n        name: \"Achat d'articles\",\r\n        currency: \"USD\",\r\n        amount: totalPrice * 100, // Stripe attend le montant en centimes\r\n        quantity: 1,\r\n      };\r\n\r\n      console.log(\"Envoi de la demande de paiement:\", productRequest);\r\n\r\n      // Appel à l'API de checkout avec options CORS explicites\r\n      const response = await axios.post(\r\n        \"http://localhost:8080/api/product/v1/checkout\", \r\n        productRequest,\r\n        {\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          withCredentials: true  // Important: envoyer les cookies pour l'authentification\r\n        }\r\n      );\r\n\r\n      console.log(\"Réponse reçue:\", response.data);\r\n\r\n      if (response.data && response.data.sessionId) {\r\n        // Utiliser l'API Stripe pour rediriger l'utilisateur vers la page de paiement\r\n        const stripe = await stripePromise;\r\n        const { error } = await stripe.redirectToCheckout({\r\n          sessionId: response.data.sessionId,\r\n        });\r\n\r\n        if (error) {\r\n          console.error(\"Erreur Stripe:\", error);\r\n          setError(`Erreur de redirection Stripe: ${error.message}`);\r\n        }\r\n      } else if (response.data && response.data.sessionUrl) {\r\n        // Redirection directe si sessionUrl est fourni\r\n        window.location.href = response.data.sessionUrl;\r\n      } else {\r\n        console.error(\"Format de réponse invalide:\", response.data);\r\n        setError(\"Format de réponse invalide du serveur\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Erreur lors du paiement:\", err);\r\n      \r\n      // Vérifier si l'erreur est liée à l'authentification\r\n      if (err.response && err.response.status === 401) {\r\n        setError(\"Votre session a expiré. Veuillez vous reconnecter.\");\r\n        setTimeout(redirectToLogin, 2000); // Rediriger après 2 secondes\r\n      } else {\r\n        // Afficher plus de détails sur l'erreur\r\n        const errorMessage = err.response \r\n          ? `Erreur ${err.response.status}: ${JSON.stringify(err.response.data)}` \r\n          : `Erreur: ${err.message}`;\r\n        \r\n        setError(`Une erreur est survenue lors du traitement de votre paiement: ${errorMessage}`);\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"checkout-container\">\r\n      <h2>Récapitulatif de la commande</h2>\r\n      \r\n      {!isAuthenticated && (\r\n        <div className=\"auth-required-message\">\r\n          <p>Vous devez être connecté pour finaliser votre achat.</p>\r\n          <div className=\"auth-buttons\">\r\n            <button className=\"login-button\" onClick={redirectToLogin}>\r\n              Se connecter\r\n            </button>\r\n            <button className=\"register-button\" onClick={() => history.push('/register')}>\r\n              Créer un compte\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {cartItems.length === 0 ? (\r\n        <div className=\"empty-cart\">\r\n          <p className=\"empty-cart-message\">Votre panier est vide</p>\r\n          <button className=\"return-button\" onClick={() => history.push('/produit')}>\r\n            Retourner à la boutique\r\n          </button>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          <div className=\"checkout-items\">\r\n            {cartItems.map((item) => (\r\n              <div className=\"checkout-item\" key={item.id}>\r\n                <div className=\"item-info\">\r\n                  <img src={item.cover} alt={item.name} className=\"item-thumbnail\" />\r\n                  <div className=\"item-details\">\r\n                    <h3>{item.name}</h3>\r\n                    <p className=\"item-price\">\r\n                      ${item.price}.00 x {item.qty} = ${item.price * item.qty}.00\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"checkout-summary\">\r\n            <div className=\"checkout-total\">\r\n              <h3>Total:</h3>\r\n              <h3 className=\"total-price\">${totalPrice}.00</h3>\r\n            </div>\r\n\r\n            {error && <p className=\"error-message\">{error}</p>}\r\n\r\n            <div className=\"checkout-actions\">\r\n              <button \r\n                className=\"back-to-cart\" \r\n                onClick={() => history.push('/cart')}\r\n              >\r\n                Retour au panier\r\n              </button>\r\n              \r\n              <button\r\n                className=\"pay-button\"\r\n                onClick={handleCheckout}\r\n                disabled={isLoading || !isAuthenticated}\r\n              >\r\n                {isLoading ? \"Traitement en cours...\" : \"Procéder au paiement\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Checkout;"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,UAAU,EAAEC,WAAW,QAAQ,kBAAkB;AAC1D,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,UAAU,QAAQ,mBAAmB;AAC9C,OAAOC,WAAW,MAAM,eAAe;AACvC,OAAO,aAAa;;AAEpB;AACA,MAAMC,aAAa,GAAGF,UAAU,CAAC,6GAA6G,CAAC;AAE/I,MAAMG,QAAQ,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EACjC,MAAMC,OAAO,GAAGR,UAAU,CAAC,CAAC;EAC5B,MAAMS,QAAQ,GAAGR,WAAW,CAAC,CAAC;EAC9B;EACA,MAAMS,SAAS,GAAGH,QAAQ,IAAKE,QAAQ,CAACE,KAAK,IAAIF,QAAQ,CAACE,KAAK,CAACD,SAAU,IAAI,EAAE;;EAEhF;EACA,MAAM,CAACE,eAAe,EAAEC,kBAAkB,CAAC,GAAGf,QAAQ,CAAC,KAAK,CAAC;;EAE7D;EACA,MAAMgB,UAAU,GAAGJ,SAAS,CAACK,MAAM,CACjC,CAACC,KAAK,EAAEC,IAAI,KAAKD,KAAK,GAAGC,IAAI,CAACC,GAAG,GAAGD,IAAI,CAACD,KAAK,EAC9C,CACF,CAAC;EAED,MAAM,CAACG,SAAS,EAAEC,YAAY,CAAC,GAAGtB,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACuB,KAAK,EAAEC,QAAQ,CAAC,GAAGxB,QAAQ,CAAC,IAAI,CAAC;;EAExC;EACAC,SAAS,CAAC,MAAM;IACd,MAAMwB,SAAS,GAAGA,CAAA,KAAM;MACtB,MAAMC,UAAU,GAAGpB,WAAW,CAACqB,eAAe,CAAC,CAAC;MAChDZ,kBAAkB,CAACW,UAAU,CAAC;IAChC,CAAC;;IAED;IACAD,SAAS,CAAC,CAAC;;IAEX;IACA,MAAMG,gBAAgB,GAAGA,CAAA,KAAM;MAC7BH,SAAS,CAAC,CAAC;IACb,CAAC;IAEDI,MAAM,CAACC,gBAAgB,CAAC,kBAAkB,EAAEF,gBAAgB,CAAC;;IAE7D;IACA,OAAO,MAAM;MACXC,MAAM,CAACE,mBAAmB,CAAC,kBAAkB,EAAEH,gBAAgB,CAAC;IAClE,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMI,eAAe,GAAGA,CAAA,KAAM;IAC5B;IACAC,cAAc,CAACC,OAAO,CAAC,oBAAoB,EAAE,WAAW,CAAC;IACzDxB,OAAO,CAACyB,IAAI,CAAC,SAAS,CAAC;EACzB,CAAC;;EAED;EACA,MAAMC,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,IAAIxB,SAAS,CAACyB,MAAM,KAAK,CAAC,EAAE;MAC1Bb,QAAQ,CAAC,uBAAuB,CAAC;MACjC;IACF;;IAEA;IACA,IAAI,CAACV,eAAe,EAAE;MACpBU,QAAQ,CAAC,uEAAuE,CAAC;MACjF;IACF;IAEAF,YAAY,CAAC,IAAI,CAAC;IAClBE,QAAQ,CAAC,IAAI,CAAC;IAEd,IAAI;MACF;MACA,MAAMc,cAAc,GAAG;QACrBC,IAAI,EAAE,kBAAkB;QACxBC,QAAQ,EAAE,KAAK;QACfC,MAAM,EAAEzB,UAAU,GAAG,GAAG;QAAE;QAC1B0B,QAAQ,EAAE;MACZ,CAAC;MAEDC,OAAO,CAACC,GAAG,CAAC,kCAAkC,EAAEN,cAAc,CAAC;;MAE/D;MACA,MAAMO,QAAQ,GAAG,MAAMzC,KAAK,CAAC0C,IAAI,CAC/B,+CAA+C,EAC/CR,cAAc,EACd;QACES,OAAO,EAAE;UACP,cAAc,EAAE;QAClB,CAAC;QACDC,eAAe,EAAE,IAAI,CAAE;MACzB,CACF,CAAC;MAEDL,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEC,QAAQ,CAACI,IAAI,CAAC;MAE5C,IAAIJ,QAAQ,CAACI,IAAI,IAAIJ,QAAQ,CAACI,IAAI,CAACC,SAAS,EAAE;QAC5C;QACA,MAAMC,MAAM,GAAG,MAAM5C,aAAa;QAClC,MAAM;UAAEgB;QAAM,CAAC,GAAG,MAAM4B,MAAM,CAACC,kBAAkB,CAAC;UAChDF,SAAS,EAAEL,QAAQ,CAACI,IAAI,CAACC;QAC3B,CAAC,CAAC;QAEF,IAAI3B,KAAK,EAAE;UACToB,OAAO,CAACpB,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAAC;UACtCC,QAAQ,CAAC,iCAAiCD,KAAK,CAAC8B,OAAO,EAAE,CAAC;QAC5D;MACF,CAAC,MAAM,IAAIR,QAAQ,CAACI,IAAI,IAAIJ,QAAQ,CAACI,IAAI,CAACK,UAAU,EAAE;QACpD;QACAzB,MAAM,CAAClB,QAAQ,CAAC4C,IAAI,GAAGV,QAAQ,CAACI,IAAI,CAACK,UAAU;MACjD,CAAC,MAAM;QACLX,OAAO,CAACpB,KAAK,CAAC,6BAA6B,EAAEsB,QAAQ,CAACI,IAAI,CAAC;QAC3DzB,QAAQ,CAAC,uCAAuC,CAAC;MACnD;IACF,CAAC,CAAC,OAAOgC,GAAG,EAAE;MACZb,OAAO,CAACpB,KAAK,CAAC,0BAA0B,EAAEiC,GAAG,CAAC;;MAE9C;MACA,IAAIA,GAAG,CAACX,QAAQ,IAAIW,GAAG,CAACX,QAAQ,CAACY,MAAM,KAAK,GAAG,EAAE;QAC/CjC,QAAQ,CAAC,oDAAoD,CAAC;QAC9DkC,UAAU,CAAC1B,eAAe,EAAE,IAAI,CAAC,CAAC,CAAC;MACrC,CAAC,MAAM;QACL;QACA,MAAM2B,YAAY,GAAGH,GAAG,CAACX,QAAQ,GAC7B,UAAUW,GAAG,CAACX,QAAQ,CAACY,MAAM,KAAKG,IAAI,CAACC,SAAS,CAACL,GAAG,CAACX,QAAQ,CAACI,IAAI,CAAC,EAAE,GACrE,WAAWO,GAAG,CAACH,OAAO,EAAE;QAE5B7B,QAAQ,CAAC,iEAAiEmC,YAAY,EAAE,CAAC;MAC3F;IACF,CAAC,SAAS;MACRrC,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,oBACEvB,KAAA,CAAA+D,aAAA;IAAKC,SAAS,EAAC,oBAAoB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACjCtE,KAAA,CAAA+D,aAAA;IAAAE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAI,iCAAgC,CAAC,EAEpC,CAACvD,eAAe,iBACff,KAAA,CAAA+D,aAAA;IAAKC,SAAS,EAAC,uBAAuB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACpCtE,KAAA,CAAA+D,aAAA;IAAAE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAG,4DAAuD,CAAC,eAC3DtE,KAAA,CAAA+D,aAAA;IAAKC,SAAS,EAAC,cAAc;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC3BtE,KAAA,CAAA+D,aAAA;IAAQC,SAAS,EAAC,cAAc;IAACO,OAAO,EAAEtC,eAAgB;IAAAgC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,cAEnD,CAAC,eACTtE,KAAA,CAAA+D,aAAA;IAAQC,SAAS,EAAC,iBAAiB;IAACO,OAAO,EAAEA,CAAA,KAAM5D,OAAO,CAACyB,IAAI,CAAC,WAAW,CAAE;IAAA6B,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,oBAEtE,CACL,CACF,CACN,EAEAzD,SAAS,CAACyB,MAAM,KAAK,CAAC,gBACrBtC,KAAA,CAAA+D,aAAA;IAAKC,SAAS,EAAC,YAAY;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACzBtE,KAAA,CAAA+D,aAAA;IAAGC,SAAS,EAAC,oBAAoB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,uBAAwB,CAAC,eAC3DtE,KAAA,CAAA+D,aAAA;IAAQC,SAAS,EAAC,eAAe;IAACO,OAAO,EAAEA,CAAA,KAAM5D,OAAO,CAACyB,IAAI,CAAC,UAAU,CAAE;IAAA6B,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,4BAEnE,CACL,CAAC,gBAENtE,KAAA,CAAA+D,aAAA,CAAA/D,KAAA,CAAAwE,QAAA,qBACExE,KAAA,CAAA+D,aAAA;IAAKC,SAAS,EAAC,gBAAgB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAC5BzD,SAAS,CAAC4D,GAAG,CAAErD,IAAI,iBAClBpB,KAAA,CAAA+D,aAAA;IAAKC,SAAS,EAAC,eAAe;IAACU,GAAG,EAAEtD,IAAI,CAACuD,EAAG;IAAAV,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC1CtE,KAAA,CAAA+D,aAAA;IAAKC,SAAS,EAAC,WAAW;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACxBtE,KAAA,CAAA+D,aAAA;IAAKa,GAAG,EAAExD,IAAI,CAACyD,KAAM;IAACC,GAAG,EAAE1D,IAAI,CAACoB,IAAK;IAACwB,SAAS,EAAC,gBAAgB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC,eACnEtE,KAAA,CAAA+D,aAAA;IAAKC,SAAS,EAAC,cAAc;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC3BtE,KAAA,CAAA+D,aAAA;IAAAE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAKlD,IAAI,CAACoB,IAAS,CAAC,eACpBxC,KAAA,CAAA+D,aAAA;IAAGC,SAAS,EAAC,YAAY;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,GACvB,EAAClD,IAAI,CAACD,KAAK,EAAC,QAAM,EAACC,IAAI,CAACC,GAAG,EAAC,MAAI,EAACD,IAAI,CAACD,KAAK,GAAGC,IAAI,CAACC,GAAG,EAAC,KACvD,CACA,CACF,CACF,CACN,CACE,CAAC,eAENrB,KAAA,CAAA+D,aAAA;IAAKC,SAAS,EAAC,kBAAkB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC/BtE,KAAA,CAAA+D,aAAA;IAAKC,SAAS,EAAC,gBAAgB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC7BtE,KAAA,CAAA+D,aAAA;IAAAE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAI,QAAU,CAAC,eACftE,KAAA,CAAA+D,aAAA;IAAIC,SAAS,EAAC,aAAa;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,GAAC,EAACrD,UAAU,EAAC,KAAO,CAC7C,CAAC,EAELO,KAAK,iBAAIxB,KAAA,CAAA+D,aAAA;IAAGC,SAAS,EAAC,eAAe;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAE9C,KAAS,CAAC,eAElDxB,KAAA,CAAA+D,aAAA;IAAKC,SAAS,EAAC,kBAAkB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC/BtE,KAAA,CAAA+D,aAAA;IACEC,SAAS,EAAC,cAAc;IACxBO,OAAO,EAAEA,CAAA,KAAM5D,OAAO,CAACyB,IAAI,CAAC,OAAO,CAAE;IAAA6B,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACtC,kBAEO,CAAC,eAETtE,KAAA,CAAA+D,aAAA;IACEC,SAAS,EAAC,YAAY;IACtBO,OAAO,EAAElC,cAAe;IACxB0C,QAAQ,EAAEzD,SAAS,IAAI,CAACP,eAAgB;IAAAkD,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAEvChD,SAAS,GAAG,wBAAwB,GAAG,sBAClC,CACL,CACF,CACL,CAED,CAAC;AAEV,CAAC;AAED,eAAeb,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module"}